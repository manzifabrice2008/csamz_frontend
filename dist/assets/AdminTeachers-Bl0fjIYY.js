import{c as T,d as A,r as a,j as e}from"./index-CzeJB2_e.js";import{A as R}from"./AdminLayout-e88jVYkQ.js";import{C as f,a as g,b,d as N,c as L}from"./card-BsroX09w.js";import{B as y}from"./badge-C-oA49Ek.js";import{B as m}from"./ThemeToggle-D2hc9s20.js";import{T as S,a as B,b as v,c as t,d as E,e as r}from"./table-D2nQrHKE.js";import{m as C}from"./api-lJrYn1A1.js";import{R as U}from"./refresh-cw-CVFQrxBh.js";import{L as x}from"./loader-circle-C8GZr3XQ.js";import{C as z}from"./circle-check-B_Tk9R__.js";import{C as F}from"./circle-x-CU3UCJ9x.js";import"./auth-yvpDPXXe.js";import"./settings-Bfsz5ImR.js";import"./chevron-left-DDaN3q0X.js";import"./users-Dg6TI95m.js";import"./newspaper-DUsPLaFp.js";import"./square-pen-BQHR_P_T.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=T("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),P={pending:"bg-amber-100 text-amber-800 dark:bg-amber-400/20 dark:text-amber-200",approved:"bg-emerald-100 text-emerald-700 dark:bg-emerald-400/20 dark:text-emerald-200",rejected:"bg-rose-100 text-rose-700 dark:bg-rose-400/20 dark:text-rose-200"};function se(){const{toast:l}=A(),[i,w]=a.useState([]),[c,h]=a.useState(!0),[n,p]=a.useState(null),k=a.useMemo(()=>i.filter(s=>s.status==="pending").length,[i]),d=async()=>{try{h(!0);const s=await C.list();w(s.teachers)}catch(s){l({title:"Failed to load teachers",description:(s==null?void 0:s.message)||"Please try again.",variant:"destructive"})}finally{h(!1)}};a.useEffect(()=>{d()},[]);const j=async(s,u)=>{try{p(s),await C.updateStatus(s,u),l({title:"Success",description:`Teacher marked as ${u}.`}),await d()}catch(o){l({title:"Update failed",description:(o==null?void 0:o.message)||"Please try again.",variant:"destructive"})}finally{p(null)}};return e.jsx(R,{children:e.jsx("section",{className:"p-6",children:e.jsxs("div",{className:"container mx-auto max-w-6xl space-y-6",children:[e.jsx(f,{className:"shadow-lg",children:e.jsxs(g,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs(b,{className:"text-2xl flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-school-primary dark:text-school-accent"}),"Teacher Approvals"]}),e.jsx(N,{children:"Review teacher registrations and approve or reject access."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",className:"text-sm",children:["Pending: ",k]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:d,disabled:c,children:[e.jsx(U,{className:`w-4 h-4 mr-2 ${c?"animate-spin":""}`}),"Refresh"]})]})]})}),e.jsxs(f,{className:"shadow-lg",children:[e.jsxs(g,{children:[e.jsx(b,{children:"Teacher Accounts"}),e.jsx(N,{children:"Latest registrations appear first."})]}),e.jsx(L,{children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(x,{className:"w-6 h-6 animate-spin text-school-primary"})}):i.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-12",children:"No teacher registrations yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(S,{children:[e.jsx(B,{children:e.jsxs(v,{children:[e.jsx(t,{children:"Teacher"}),e.jsx(t,{children:"Username"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(E,{children:i.map(s=>e.jsxs(v,{children:[e.jsx(r,{className:"font-semibold",children:s.full_name}),e.jsx(r,{children:s.username}),e.jsx(r,{children:s.email}),e.jsx(r,{children:e.jsx(y,{className:P[s.status],children:s.status})}),e.jsxs(r,{className:"flex justify-end gap-2",children:[e.jsx(m,{size:"sm",variant:"outline",className:"border-emerald-200 text-emerald-600",onClick:()=>j(s.id,"approved"),disabled:s.status==="approved"||n===s.id,children:n===s.id?e.jsx(x,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Approve"]})}),e.jsx(m,{size:"sm",variant:"outline",className:"border-rose-200 text-rose-600",onClick:()=>j(s.id,"rejected"),disabled:s.status==="rejected"||n===s.id,children:n===s.id?e.jsx(x,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Reject"]})})]})]},s.id))})]})})})]})]})})})}export{se as default};
