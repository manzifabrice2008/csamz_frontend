import{c as A,r as m,d as F,j as e,G as f}from"./index-DO3DQyOj.js";import{A as L}from"./AdminLayout-BJsapQL8.js";import{C as l,c as i,a as p,b as h}from"./card-C9br3U49.js";import{a as w,n as T}from"./api-D9lEpycP.js";import{U as v}from"./users-u0NU3Vz3.js";import{C as j}from"./clock-yqmI1-do.js";import{C as d}from"./circle-check-big-DR1ie-Ed.js";import{N as g}from"./square-pen-B3paAdo2.js";import{F as U}from"./file-text-C5EO8ggz.js";import{C as b}from"./circle-x-D2iSncAj.js";import{C as E}from"./calendar-C1w5P_oc.js";import"./Combination-CmbmT9KT.js";import"./ThemeToggle-D7luiHAO.js";import"./auth-yvpDPXXe.js";import"./settings-C2rD9Q76.js";import"./chevron-left-Wbh9FitJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=A("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=A("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function ee(){const[O,u]=m.useState(!0),{toast:k}=F(),[s,C]=m.useState({applications:{total:0,pending:0,approved:0,rejected:0,thisMonth:0},news:{total:0,thisMonth:0,categories:{}},recentActivity:[]});m.useEffect(()=>{M()},[]);const M=async()=>{try{u(!0);const t=await w.getStats(),c=await w.getAll(),o=await T.getAll(),r=new Date,D=c.applications.filter(a=>{const n=new Date(a.created_at);return n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()}),I=o.articles.filter(a=>{const n=new Date(a.created_at);return n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()}),x={};o.articles.forEach(a=>{x[a.category]=(x[a.category]||0)+1});const S=c.applications.slice(0,5).map(a=>({type:"application",name:a.full_name,program:a.program,status:a.status,date:a.created_at}));C({applications:{total:t.stats.total,pending:t.stats.pending,approved:t.stats.approved,rejected:t.stats.rejected,thisMonth:D.length},news:{total:o.articles.length,thisMonth:I.length,categories:x},recentActivity:S})}catch(t){k({title:"Error",description:t.message||"Failed to fetch overview data",variant:"destructive"})}finally{u(!1)}},R=t=>{switch(t){case"pending":return e.jsx(j,{className:"w-4 h-4 text-yellow-600"});case"approved":return e.jsx(d,{className:"w-4 h-4 text-green-600"});case"rejected":return e.jsx(b,{className:"w-4 h-4 text-red-600"});default:return null}};return e.jsx(L,{children:e.jsxs("section",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"animate-fadeInDown",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.jsx("span",{className:"gradient-text",children:"Admin Overview"})}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your school website."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-fadeInUp",children:[e.jsx(l,{className:"hover-lift",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsx(N,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.applications.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Applications"}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["+",s.applications.thisMonth," this month"]})]})]})}),e.jsx(l,{className:"hover-lift",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(j,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),e.jsx(y,{className:"w-5 h-5 text-yellow-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.applications.pending}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Review"}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"Requires attention"})]})]})}),e.jsx(l,{className:"hover-lift",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(d,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsx(N,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.applications.approved}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[s.applications.total>0?Math.round(s.applications.approved/s.applications.total*100):0,"% approval rate"]})]})]})}),e.jsx(l,{className:"hover-lift",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsx(U,{className:"w-5 h-5 text-purple-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.news.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"News Articles"}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1",children:["+",s.news.thisMonth," this month"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"animate-fadeInLeft",children:[e.jsx(p,{children:e.jsxs(h,{className:"text-xl flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-school-primary"}),"Application Status Breakdown"]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Pending"})]}),e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:s.applications.pending})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Approved"})]}),e.jsx("span",{className:"text-2xl font-bold text-green-600",children:s.applications.approved})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium",children:"Rejected"})]}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:s.applications.rejected})]})]})})]}),e.jsxs(l,{className:"animate-fadeInRight",children:[e.jsx(p,{children:e.jsxs(h,{className:"text-xl flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-school-primary"}),"News by Category"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(s.news.categories).length>0?Object.entries(s.news.categories).map(([t,c])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-medium",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-background rounded-full h-2",children:e.jsx("div",{className:"bg-school-primary h-2 rounded-full",style:{width:`${c/s.news.total*100}%`}})}),e.jsx("span",{className:"text-sm font-bold w-8 text-right",children:c})]})]},t)):e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No news articles yet"})})})]})]}),e.jsxs(l,{className:"animate-fadeInUp",children:[e.jsx(p,{children:e.jsxs(h,{className:"text-xl flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-school-primary"}),"Recent Applications"]})}),e.jsx(i,{children:s.recentActivity.length>0?e.jsx("div",{className:"space-y-3",children:s.recentActivity.map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-background rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-school-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(f,{className:"w-3 h-3"}),t.program]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),new Date(t.date).toLocaleDateString()]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[R(t.status),e.jsx("span",{className:"text-sm capitalize",children:t.status})]})]})]},c))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent activity"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-fadeInUp",children:[e.jsx(l,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"This Month"}),e.jsx("p",{className:"text-3xl font-bold",children:s.applications.thisMonth}),e.jsx("p",{className:"text-sm opacity-90",children:"New Applications"})]}),e.jsx(N,{className:"w-12 h-12 opacity-50"})]})})}),e.jsx(l,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Approval Rate"}),e.jsxs("p",{className:"text-3xl font-bold",children:[s.applications.total>0?Math.round(s.applications.approved/s.applications.total*100):0,"%"]}),e.jsx("p",{className:"text-sm opacity-90",children:"Success Rate"})]}),e.jsx(d,{className:"w-12 h-12 opacity-50"})]})})}),e.jsx(l,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Content"}),e.jsx("p",{className:"text-3xl font-bold",children:s.news.total}),e.jsx("p",{className:"text-sm opacity-90",children:"Published Articles"})]}),e.jsx(g,{className:"w-12 h-12 opacity-50"})]})})})]})]})})}export{ee as default};
