import{a as j,r as n,j as e}from"./index-DO3DQyOj.js";import{L as N}from"./Layout-CrlmADHv.js";import{B as b}from"./Combination-CmbmT9KT.js";import{A as w}from"./api-D9lEpycP.js";import{L as y}from"./loader-circle-BtKAsjRv.js";import{C as k}from"./calendar-C1w5P_oc.js";import{T as L}from"./tag-_ECNjkOv.js";import{A}from"./arrow-right-DHxqtFqB.js";import"./ThemeToggle-D7luiHAO.js";import"./index-B0Ri7ZjS.js";import"./globe-D0JlWi5d.js";import"./index-bF6N7R3r.js";import"./phone-Cfx4KfSj.js";import"./house-DEd3rU29.js";import"./square-pen-B3paAdo2.js";import"./image-BzTYbBvL.js";import"./user-CsuowrF_.js";import"./map-pin-D6wV0YeO.js";import"./auth-yvpDPXXe.js";const $=s=>{if(!s||s.trim()==="")return"";if(/^https?:\/\//i.test(s))return s;const a=w.replace(/\/api$/,"");return s.startsWith("/")?`${a}${s}`:`${a}/${s}`};function J(){const s=j(),[a,x]=n.useState([]),[h,p]=n.useState(!0),[i,l]=n.useState("");n.useEffect(()=>{c()},[]);const c=async()=>{try{const r=await(await fetch("http://localhost:5000/api/news")).json();r.success?x(r.articles):l("Failed to load news articles")}catch(t){console.error("Error fetching news:",t),l("Unable to connect to server")}finally{p(!1)}},u=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx(N,{children:e.jsxs("main",{className:"container mx-auto px-4 py-12 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-school-primary rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-school-accent rounded-full blur-3xl animate-float delay-300"})]}),e.jsxs("div",{className:"container mx-auto max-w-6xl relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 animate-fadeInDown",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e.jsx("span",{className:"gradient-text",children:"Latest News & Updates"})}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto animate-fadeInUp delay-200",children:"Stay informed about events, achievements, and developments at CSAM Zaccaria"})]}),h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(y,{className:"w-12 h-12 animate-spin text-school-primary dark:text-school-accent mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]}):i?e.jsx("div",{className:"text-center py-20",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:"Error Loading News"}),e.jsx("p",{className:"text-red-500 dark:text-red-300 text-sm",children:i}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-school-primary dark:bg-school-accent text-white rounded-lg hover:opacity-90 transition-opacity",children:"Try Again"})]})}):a.length===0?e.jsx("div",{className:"text-center py-20",children:e.jsxs("div",{className:"bg-muted rounded-lg p-8 max-w-md mx-auto",children:[e.jsx("p",{className:"text-muted-foreground text-lg",children:"No news articles available yet."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Check back soon for updates!"})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((t,r)=>{const f=`delay-${(r+1)*100}`;return e.jsxs("article",{className:`bg-card rounded-lg overflow-hidden hover:shadow-2xl transition-all duration-500 hover-lift animate-fadeInUp ${f} transform hover:scale-105`,children:[e.jsx("div",{className:"h-48 bg-muted flex items-center justify-center overflow-hidden",children:(()=>{var m;const g=((m=t.image_urls)==null?void 0:m.find(o=>o&&o.trim().length>0))||t.image_url,v=$(g),d="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=400&h=300&fit=crop";return e.jsx("img",{src:v||d,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110",onError:o=>{o.currentTarget.src=d}})})()}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1 hover:text-school-primary dark:hover:text-school-accent transition-colors",children:[e.jsx(k,{className:"h-4 w-4"}),u(t.published_date)]}),e.jsxs("span",{className:"flex items-center gap-1 hover:text-school-primary dark:hover:text-school-accent transition-colors",children:[e.jsx(L,{className:"h-4 w-4"}),t.category]})]}),e.jsx("h2",{className:"text-xl font-bold mb-3 text-foreground hover:text-school-primary dark:hover:text-school-accent transition-colors cursor-pointer",onClick:()=>s(`/news/${t.id}`),children:t.title}),e.jsx("p",{className:"text-muted-foreground line-clamp-3 mb-4",children:t.excerpt}),t.author_name&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-4 italic",children:["By ",t.author_name]}),e.jsxs(b,{onClick:()=>s(`/news/${t.id}`),variant:"outline",className:"w-full group hover:bg-school-primary hover:text-white dark:hover:bg-school-accent transition-all",children:["Read More",e.jsx(A,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})]})]},t.id)})})]})]})})}export{J as default};
