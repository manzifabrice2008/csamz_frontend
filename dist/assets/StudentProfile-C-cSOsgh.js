import{d as M,r as i,j as e,L as c}from"./index-CzeJB2_e.js";import{s as _,c as F,g as y}from"./api-lJrYn1A1.js";import{S as I}from"./StudentLayout-DdLerGO8.js";import{C as n,c as d,a as p,b as j,d as f}from"./card-BsroX09w.js";import{B as m}from"./ThemeToggle-D2hc9s20.js";import{A as Y,b as H,a as V}from"./avatar-AnT28iLS.js";import{S as $}from"./separator-BO46W0Pz.js";import{B as o}from"./badge-C-oA49Ek.js";import{L as q}from"./loader-circle-C8GZr3XQ.js";import{S as O}from"./settings-Bfsz5ImR.js";import{S as Q}from"./square-pen-BQHR_P_T.js";import{U as Z}from"./user-CRAUHVsN.js";import{M as z}from"./mail-5yJGIojy.js";import{P as G}from"./phone-CnVUOyj2.js";import{B as C}from"./book-open-C9ZbQfPt.js";import{A as J}from"./award-DJdeNQEu.js";import{C as T}from"./calendar-DGQQ9pRT.js";import{M as K}from"./map-pin-DS4Hc9gx.js";import{T as W}from"./trending-up-DWYPjze6.js";import{F as g}from"./file-text-BxJWlFjv.js";import{C as X}from"./clock-6dAMR-Ce.js";import{U as ee}from"./users-Dg6TI95m.js";import{T as se}from"./target-DcFT8PFq.js";import"./auth-yvpDPXXe.js";import"./chevron-left-DDaN3q0X.js";import"./bell-Ckq7fT2u.js";import"./index-CMcuwscu.js";function Ee(){const{toast:N}=M(),[P,v]=i.useState(!0),[s,E]=i.useState(null),[l,D]=i.useState({averageScore:85,examsTaken:12,upcomingExams:3,pendingAssignments:2,attendance:94,level:"L3",trade:"Software Development"}),[L,k]=i.useState([]);i.useEffect(()=>{(async()=>{try{v(!0);const[t,w,x,S]=await Promise.all([_.getCurrentStudent(),F.getStats(),y.getStudentHistory(),y.list()]);t.success&&E(t.student);let h=0,b=[];x.success&&(h=x.results.length,b=x.results.map(r=>({id:`exam-${r.id}`,type:"exam",title:r.examTitle,score:r.score,totalPoints:r.totalMarks,status:"completed",date:r.submittedAt})));let A=0;if(S.success){const r=S.exams.length;A=Math.max(0,r-h)}let u={attendance:0,assignments:0,grades:0};w.success&&(u=w.stats),D({averageScore:u.grades,examsTaken:h,upcomingExams:A,pendingAssignments:0,attendance:u.attendance,level:t.success&&t.student.level||"N/A",trade:t.success&&t.student.trade||"N/A"}),k(b.slice(0,5))}catch(t){console.error("Failed to load profile data:",t),N({title:"Error",description:"Failed to load some profile information.",variant:"destructive"})}finally{v(!1)}})()},[N]);const R=a=>a.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),U=a=>{switch(a){case"exam":return e.jsx(g,{className:"w-4 h-4"});case"assessment":return e.jsx(C,{className:"w-4 h-4"});case"assignment":return e.jsx(se,{className:"w-4 h-4"});default:return e.jsx(g,{className:"w-4 h-4"})}},B=a=>{switch(a){case"completed":return e.jsx(o,{variant:"default",className:"bg-green-500",children:"Completed"});case"pending":return e.jsx(o,{variant:"secondary",children:"Pending"});case"upcoming":return e.jsx(o,{variant:"outline",children:"Upcoming"});default:return e.jsx(o,{variant:"outline",children:a})}};return P?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(q,{className:"w-8 h-8 animate-spin"})}):e.jsx(I,{children:e.jsxs("div",{className:"container mx-auto p-4 space-y-6 max-w-6xl",children:[e.jsxs(n,{className:"overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-school-primary to-school-accent h-24"}),e.jsx(d,{className:"relative pt-0 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-4 -mt-12",children:[e.jsxs(Y,{className:"h-24 w-24 border-4 border-white shadow-lg",children:[e.jsx(H,{src:"/placeholder-avatar.jpg",alt:s==null?void 0:s.full_name}),e.jsx(V,{className:"bg-school-primary text-white text-2xl font-bold",children:s!=null&&s.full_name?R(s.full_name):"ST"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:(s==null?void 0:s.full_name)||"Student Name"}),e.jsxs("p",{className:"text-muted-foreground",children:[(s==null?void 0:s.trade)||"Trade"," • ",(s==null?void 0:s.level)||"Level 3"," Student"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Student ID: ",(s==null?void 0:s.id)||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{asChild:!0,variant:"outline",children:e.jsxs(c,{to:"/student/settings",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Settings"]})}),e.jsx(m,{asChild:!0,children:e.jsxs(c,{to:"/student/dashboard",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(n,{className:"lg:col-span-2",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Personal Information"]}),e.jsx(f,{children:"Your personal details and contact information"})]}),e.jsx(d,{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(s==null?void 0:s.email)||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(s==null?void 0:s.phone_number)||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Trade"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(s==null?void 0:s.trade)||"Not specified"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Level"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(s==null?void 0:s.level)||"Level 3"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Enrollment Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s!=null&&s.created_at?new Date(s.created_at).toLocaleDateString():"Not available"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Institution"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"CSAMZ Technical School"})]})]})]})})]}),e.jsxs(n,{children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),"Quick Stats"]}),e.jsx(f,{children:"Your academic performance overview"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-school-primary",children:[l.averageScore,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average Score"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-school-primary",children:l.examsTaken}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Exams Taken"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-school-primary",children:l.upcomingExams}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Upcoming"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-school-primary",children:[l.attendance,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Attendance"})]})]}),e.jsx($,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Academic Progress"}),e.jsx("span",{className:"font-medium",children:"Excellent"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-school-primary h-2 rounded-full transition-all duration-300",style:{width:`${l.averageScore}%`}})})]}),e.jsx(m,{asChild:!0,className:"w-full",variant:"outline",children:e.jsxs(c,{to:"/student/results",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"View All Results"]})})]})]})]}),e.jsxs(n,{children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Recent Activity"]}),e.jsx(f,{children:"Your latest academic activities and performance"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-4",children:L.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-school-primary/10 rounded-lg",children:U(a.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(T,{className:"w-3 h-3"}),new Date(a.date).toLocaleDateString(),a.score!==void 0&&e.jsxs("span",{children:["• Score: ",a.score,"/",a.totalPoints]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:B(a.status)})]},a.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(m,{asChild:!0,variant:"outline",children:e.jsxs(c,{to:"/student/dashboard",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"View Full Dashboard"]})})})]})]})]})})}export{Ee as default};
