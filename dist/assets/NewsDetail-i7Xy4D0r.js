import{b as U,a as A,r as o,j as e}from"./index-CzeJB2_e.js";import{L as p}from"./Layout-C6YMJn0C.js";import{B as m}from"./ThemeToggle-D2hc9s20.js";import{A as f}from"./api-lJrYn1A1.js";import{L as B}from"./loader-circle-C8GZr3XQ.js";import{A as u}from"./arrow-left-hwJQProB.js";import{A as w}from"./arrow-right-CLO1Zh8e.js";import{C as y}from"./calendar-DGQQ9pRT.js";import{T as k}from"./tag-Bn8RlfRO.js";import{U as T}from"./user-CRAUHVsN.js";import"./index-CMcuwscu.js";import"./globe-BisNQRON.js";import"./index-BtVmVfNa.js";import"./chevron-up-DxfnO0xg.js";import"./info-Dk1MT2Ip.js";import"./newspaper-DUsPLaFp.js";import"./square-pen-BQHR_P_T.js";import"./image-DR2l2JQ_.js";import"./mail-5yJGIojy.js";import"./map-pin-DS4Hc9gx.js";import"./phone-CnVUOyj2.js";import"./auth-yvpDPXXe.js";const $=r=>{if(!r||r.trim()==="")return"";if(/^https?:\/\//i.test(r))return r;const c=f.replace(/\/api$/,"");return r.startsWith("/")?`${c}${r}`:`${c}/${r}`};function le(){const{id:r}=U(),c=A(),[a,I]=o.useState(null),[g,L]=o.useState([]),[C,E]=o.useState(!0),[b,j]=o.useState(""),[n,d]=o.useState(0),[D,N]=o.useState(!1);o.useEffect(()=>{r&&S()},[r]);const S=async()=>{try{const t=await(await fetch(`${f}/news/${r}`)).json();t.success?(I(t.article),d(0),_()):j("Article not found")}catch(s){console.error("Error fetching article:",s),j("Unable to connect to server")}finally{E(!1)}},_=async()=>{try{const t=await(await fetch(`${f}/news`)).json();if(t.success){const i=t.articles.filter(x=>x.id!==parseInt(r||"0")).slice(0,3);L(i)}}catch(s){console.error("Error fetching latest news:",s)}},v=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),l=o.useMemo(()=>a?[a.image_url,...a.image_urls||[]].filter((t,i,x)=>t&&t.trim()!==""&&x.indexOf(t)===i).map(t=>$(t)):[],[a]);o.useEffect(()=>{if(!l.length)return;const s=setInterval(()=>{d(t=>(t+1)%l.length)},5e3);return()=>clearInterval(s)},[l.length]);const h=s=>{N(!0),d(s),setTimeout(()=>N(!1),100)};return C?e.jsx(p,{children:e.jsx("main",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(B,{className:"w-12 h-12 animate-spin text-school-primary dark:text-school-accent mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading article..."})]})})}):b||!a?e.jsx(p,{children:e.jsx("main",{className:"container mx-auto px-4 py-12",children:e.jsx("div",{className:"text-center py-20",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:"Error Loading Article"}),e.jsx("p",{className:"text-red-500 dark:text-red-300 text-sm",children:b}),e.jsx(m,{onClick:()=>c("/news"),className:"mt-4",children:"Back to News"})]})})})}):e.jsx(p,{children:e.jsxs("main",{className:"container mx-auto px-4 py-12 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-school-primary rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-school-accent rounded-full blur-3xl animate-float delay-300"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[e.jsxs(m,{variant:"ghost",onClick:()=>c("/news"),className:"mb-6 hover:bg-school-primary/10 dark:hover:bg-school-accent/10",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to News"]}),e.jsxs("article",{className:"bg-card rounded-lg overflow-hidden shadow-xl animate-fadeInUp",children:[e.jsxs("div",{className:"bg-muted",children:[e.jsxs("div",{className:"relative h-96 overflow-hidden",children:[l.length>0?l.map((s,t)=>e.jsx("img",{src:s||"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=1200&h=600&fit=crop",alt:`${a.title} image ${t+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ${t===n?"opacity-100":"opacity-0"}`,onError:i=>{i.currentTarget.src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=1200&h=600&fit=crop"}},`${a.id}-img-${t}`)):e.jsx("img",{src:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=1200&h=600&fit=crop",alt:a.title,className:"absolute inset-0 w-full h-full object-cover"}),l.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h((n-1+l.length)%l.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/40 hover:bg-black/60 text-white rounded-full p-3 transition-all","aria-label":"Previous image",children:e.jsx(u,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h((n+1)%l.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/40 hover:bg-black/60 text-white rounded-full p-3 transition-all","aria-label":"Next image",children:e.jsx(w,{className:"w-5 h-5"})})]})]}),l.length>1&&e.jsx("div",{className:"flex items-center justify-center gap-3 py-4 bg-card/80 backdrop-blur",children:l.map((s,t)=>e.jsx("button",{onClick:()=>h(t),className:`h-3 w-3 rounded-full transition-all duration-300 ${t===n?"bg-school-primary dark:bg-school-accent scale-110":"bg-muted-foreground/40"}`,"aria-label":`View image ${t+1}`},`${a.id}-dot-${t}`))})]}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-2 bg-school-primary/10 dark:bg-school-accent/10 px-3 py-1 rounded-full",children:[e.jsx(y,{className:"h-4 w-4"}),v(a.published_date)]}),e.jsxs("span",{className:"flex items-center gap-2 bg-school-primary/10 dark:bg-school-accent/10 px-3 py-1 rounded-full",children:[e.jsx(k,{className:"h-4 w-4"}),a.category]}),a.author_name&&e.jsxs("span",{className:"flex items-center gap-2 bg-school-primary/10 dark:bg-school-accent/10 px-3 py-1 rounded-full",children:[e.jsx(T,{className:"h-4 w-4"}),a.author_name]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 gradient-text",children:a.title}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 italic border-l-4 border-school-primary dark:border-school-accent pl-4",children:a.excerpt}),e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:e.jsx("div",{className:"text-foreground leading-relaxed whitespace-pre-wrap",children:a.content||a.excerpt})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsxs(m,{onClick:()=>c("/news"),className:"w-full md:w-auto",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Back to All News"]})})]})]}),g.length>0&&e.jsxs("div",{className:"mt-12 animate-fadeInUp delay-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold gradient-text",children:"Latest News"}),e.jsxs(m,{variant:"ghost",onClick:()=>c("/news"),className:"hover:bg-school-primary/10 dark:hover:bg-school-accent/10",children:["View All",e.jsx(w,{className:"ml-2 h-4 w-4"})]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:g.map(s=>e.jsxs("article",{className:"bg-card rounded-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover-lift cursor-pointer",onClick:()=>{c(`/news/${s.id}`),window.scrollTo({top:0,behavior:"smooth"})},children:[e.jsx("div",{className:"h-40 bg-muted flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:$(s.image_url)||"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=400&h=300&fit=crop",alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110",onError:t=>{t.currentTarget.src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=400&h=300&fit=crop"}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"h-3 w-3"}),v(s.published_date)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),s.category]})]}),e.jsx("h3",{className:"font-bold text-foreground hover:text-school-primary dark:hover:text-school-accent transition-colors line-clamp-2 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.excerpt})]})]},s.id))})]})]})]})})}export{le as default};
