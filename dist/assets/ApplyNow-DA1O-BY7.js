import{a as X,d as A,r as d,j as e,G as g}from"./index-CzeJB2_e.js";import{L as j}from"./Layout-C6YMJn0C.js";import{B as h}from"./ThemeToggle-D2hc9s20.js";import{I as i}from"./input-BQrncYhx.js";import{T as k}from"./textarea-pwDqsI7c.js";import{C as v,c as b,a as T,b as M}from"./card-BsroX09w.js";import{L as l}from"./label-DD5LN0z1.js";import{s as q,a as B}from"./api-lJrYn1A1.js";import{C as D}from"./circle-check-B_Tk9R__.js";import{U as L}from"./user-CRAUHVsN.js";import{P as U}from"./phone-CnVUOyj2.js";import{M as I}from"./mail-5yJGIojy.js";import{M as E}from"./map-pin-DS4Hc9gx.js";import{U as G}from"./users-Dg6TI95m.js";import{F as N}from"./file-text-BxJWlFjv.js";import{U as R}from"./upload-DFRZPJ5w.js";import{L as z}from"./loader-circle-C8GZr3XQ.js";import"./index-CMcuwscu.js";import"./globe-BisNQRON.js";import"./index-BtVmVfNa.js";import"./chevron-up-DxfnO0xg.js";import"./info-Dk1MT2Ip.js";import"./newspaper-DUsPLaFp.js";import"./square-pen-BQHR_P_T.js";import"./image-DR2l2JQ_.js";import"./auth-yvpDPXXe.js";function fe(){const p=X(),{toast:c}=A(),u=d.useMemo(()=>q.getStoredStudent(),[]),[t,x]=d.useState(!1),[y,w]=d.useState(!1),[s,r]=d.useState({full_name:"",email:(u==null?void 0:u.email)||"",phone_number:"",date_of_birth:"",gender:"Male",address:"",program:"",previous_school:"",previous_qualification:"",guardian_name:"",guardian_phone:"",reportFile:void 0}),m=d.useRef(null),_=a=>{if(a.target.files&&a.target.files[0]){const o=a.target.files[0];if(o.type!=="application/pdf"){c({title:"Invalid File Type",description:"Please upload a PDF file.",variant:"destructive"});return}if(o.size>10*1024*1024){c({title:"File Too Large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}r(n=>({...n,reportFile:o}))}},F=()=>{r(a=>({...a,reportFile:void 0})),m.current&&(m.current.value="")},C=["Software Development","Computer Systems and Networks","Plumbing Technology","Building Construction","Wood Technology"],S=async a=>{var o;a.preventDefault(),x(!0);try{const{reportFile:n,...f}=s,P={...f,email:((o=f.email)==null?void 0:o.trim())||void 0,report:n};await B.create(P),c({title:"Application Submitted!",description:"Your application has been received. We'll contact you soon."}),w(!0),setTimeout(()=>{p("/")},3e3)}catch(n){c({title:"Submission Failed",description:n.message||"Unable to submit application. Please try again.",variant:"destructive"})}finally{x(!1)}};return y?e.jsx(j,{children:e.jsxs("section",{className:"min-h-screen py-20 px-4 flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-school-primary rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-school-accent rounded-full blur-3xl animate-float delay-300"})]}),e.jsx(v,{className:"w-full max-w-2xl shadow-2xl hover-lift animate-fadeInUp relative z-10 text-center",children:e.jsxs(b,{className:"p-12",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mb-6 animate-bounce",children:e.jsx(D,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold mb-4 gradient-text",children:"Application Submitted Successfully!"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Thank you for applying to CSAM Zaccaria TVET. Our admissions team will review your application and contact you via phone or email within 3-5 business days."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Redirecting to homepage..."})]})})]})}):e.jsx(j,{children:e.jsxs("section",{className:"py-20 px-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-school-primary rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-school-accent rounded-full blur-3xl animate-float delay-300"})]}),e.jsxs("div",{className:"container mx-auto max-w-4xl relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 animate-fadeInDown",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-school-primary dark:bg-school-accent rounded-full flex items-center justify-center mb-4 animate-float",children:e.jsx(g,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e.jsx("span",{className:"gradient-text",children:"Apply Now"})}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Start your journey to excellence at CSAM Zaccaria TVET. Fill out the application form below."})]}),e.jsxs(v,{className:"shadow-2xl hover-lift animate-fadeInUp",children:[e.jsxs(T,{children:[e.jsx(M,{className:"text-2xl text-school-primary dark:text-school-accent",children:"Student Application Form"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All fields marked with * are required"})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Personal Information"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"full_name",children:"Full Name *"}),e.jsx(i,{id:"full_name",placeholder:"John Doe",value:s.full_name,onChange:a=>r({...s,full_name:a.target.value}),required:!0,disabled:t})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"date_of_birth",children:"Date of Birth *"}),e.jsx(i,{id:"date_of_birth",type:"date",value:s.date_of_birth,onChange:a=>r({...s,date_of_birth:a.target.value}),required:!0,disabled:t})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"gender",children:"Gender *"}),e.jsxs("select",{id:"gender",value:s.gender,onChange:a=>r({...s,gender:a.target.value}),required:!0,disabled:t,className:"w-full p-2 border rounded-md bg-background text-foreground",children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"phone_number",className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Phone Number *"]}),e.jsx(i,{id:"phone_number",type:"tel",placeholder:"+250 XXX XXX XXX",value:s.phone_number,onChange:a=>r({...s,phone_number:a.target.value}),required:!0,disabled:t})]})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Email Address (optional)"]}),e.jsx(i,{id:"email",type:"email",placeholder:"john@example.com",value:s.email,onChange:a=>r({...s,email:a.target.value}),disabled:t})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"address",className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Address *"]}),e.jsx(k,{id:"address",placeholder:"Enter your full address",value:s.address,onChange:a=>r({...s,address:a.target.value}),required:!0,disabled:t,className:"h-20"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Program Selection"]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"program",children:"Choose Your Program *"}),e.jsxs("select",{id:"program",value:s.program,onChange:a=>r({...s,program:a.target.value}),required:!0,disabled:t,className:"w-full p-2 border rounded-md bg-background text-foreground",children:[e.jsx("option",{value:"",children:"Select a program"}),C.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Educational Background"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"previous_school",children:"Previous School"}),e.jsx(i,{id:"previous_school",placeholder:"Name of your previous school",value:s.previous_school,onChange:a=>r({...s,previous_school:a.target.value}),disabled:t})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"previous_qualification",children:"Previous Qualification"}),e.jsx(i,{id:"previous_qualification",placeholder:"e.g., O-Level, A-Level",value:s.previous_qualification,onChange:a=>r({...s,previous_qualification:a.target.value}),disabled:t})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Guardian Information"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"guardian_name",children:"Guardian Name"}),e.jsx(i,{id:"guardian_name",placeholder:"Parent/Guardian full name",value:s.guardian_name,onChange:a=>r({...s,guardian_name:a.target.value}),disabled:t})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"guardian_phone",children:"Guardian Phone"}),e.jsx(i,{id:"guardian_phone",type:"tel",placeholder:"+250 XXX XXX XXX",value:s.guardian_phone,onChange:a=>r({...s,guardian_phone:a.target.value}),disabled:t})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Academic Report (Optional)"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"report",children:"Upload your latest academic report (PDF, max 10MB)"}),e.jsx("input",{type:"file",id:"report",ref:m,accept:".pdf",onChange:_,className:"hidden",disabled:t}),s.reportFile?e.jsxs("div",{className:"border rounded-lg p-4 flex items-center justify-between bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.reportFile.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s.reportFile.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(h,{type:"button",variant:"ghost",size:"sm",onClick:F,disabled:t,children:"Remove"})]}):e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>{var a;return(a=m.current)==null?void 0:a.click()},children:[e.jsx(R,{className:"w-10 h-10 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF only (max 10MB)"})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-border",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>p(-1),disabled:t,children:"Back"}),e.jsx(h,{type:"submit",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Application"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"By submitting this form, you agree to our terms and conditions. We will contact you via phone or email regarding your application status."})]})})]})]})]})})}export{fe as default};
