import{r as i,u as b,a as v,j as e,X as w,L as x}from"./index-CzeJB2_e.js";import{B as o,T as k}from"./ThemeToggle-D2hc9s20.js";import{A as S,a as y,L as A,C}from"./avatar-AnT28iLS.js";import{s as h,f as L}from"./api-lJrYn1A1.js";import{M as z,L as $,C as E,S as I}from"./settings-Bfsz5ImR.js";import{C as M}from"./chevron-left-DDaN3q0X.js";import{B}from"./bell-Ckq7fT2u.js";import{U as O}from"./user-CRAUHVsN.js";import{A as T}from"./award-DJdeNQEu.js";function W({children:u}){var m;const[r,c]=i.useState(!0),[p,g]=i.useState(0),l=b(),d=v(),t=h.getStoredStudent();i.useEffect(()=>{const s=async()=>{try{const a=await L.getAll();g(a.unreadCount)}catch(a){console.error("Failed to fetch notifications count",a)}};s();const n=setInterval(s,6e4);return()=>clearInterval(n)},[]);const f=()=>{h.logout(),d("/student/login")},j=[{name:"Dashboard",path:"/student/dashboard",icon:A,description:"Overview & quick access"},{name:"My Exams",path:"/student/exams",icon:C,description:"Available online exams"},{name:"Results",path:"/student/results",icon:E,description:"View your exam results"},{name:"Profile",path:"/student/profile",icon:O,description:"Manage your profile"},{name:"Settings",path:"/student/settings",icon:I,description:"Account settings"}],N=s=>s==="/student/dashboard"?l.pathname===s:l.pathname.startsWith(s);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-card border-b border-border z-50 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>c(!r),className:"lg:hidden",children:r?e.jsx(w,{className:"w-5 h-5"}):e.jsx(z,{className:"w-5 h-5"})}),e.jsxs(x,{to:"/",className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-school-primary dark:text-school-accent",children:"CSAMZ Student Portal"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(o,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",onClick:()=>d("/student/dashboard"),children:[e.jsx(B,{className:"w-5 h-5"}),p>0&&e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-600 rounded-full animate-pulse ring-2 ring-background"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:(t==null?void 0:t.full_name)||"Student"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(t==null?void 0:t.trade)||"Student"," â€¢ ID: ",(t==null?void 0:t.id)||"N/A"]})]}),e.jsx(S,{className:"h-8 w-8 border-2 border-school-primary",children:e.jsx(y,{className:"bg-school-primary/10 text-school-primary text-xs font-semibold",children:((m=t==null?void 0:t.full_name)==null?void 0:m.charAt(0))||"S"})})]}),e.jsx(k,{}),e.jsxs(o,{variant:"outline",size:"sm",onClick:f,className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),e.jsxs("aside",{className:`fixed top-16 left-0 bottom-0 w-64 bg-card border-r border-border transition-transform duration-300 z-40 ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsx("nav",{className:"p-4 space-y-2",children:j.map(s=>{const n=s.icon,a=N(s.path);return e.jsxs(x,{to:s.path,className:`flex items-start gap-3 p-3 rounded-lg transition-all duration-200 ${a?"bg-school-primary text-white dark:bg-school-accent":"hover:bg-muted"}`,children:[e.jsx(n,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${a?"text-white":""}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${a?"text-white":""}`,children:s.name}),e.jsx("div",{className:`text-xs mt-0.5 ${a?"text-white/80":"text-muted-foreground"}`,children:s.description})]})]},s.path)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:e.jsxs("div",{className:"bg-muted rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-school-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Quick Stats"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-2 bg-background rounded",children:[e.jsx("div",{className:"font-medium",children:"85%"}),e.jsx("div",{className:"text-muted-foreground",children:"Avg Score"})]}),e.jsxs("div",{className:"text-center p-2 bg-background rounded",children:[e.jsx("div",{className:"font-medium",children:"12"}),e.jsx("div",{className:"text-muted-foreground",children:"Exams Taken"})]})]})]})})]}),e.jsx("main",{className:`pt-16 transition-all duration-300 ${r?"lg:pl-64":""}`,children:e.jsx("div",{className:"min-h-[calc(100vh-4rem)]",children:u})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>c(!1)})]})}export{W as S};
