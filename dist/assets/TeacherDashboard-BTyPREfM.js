import{r as d,u as J,a as z,j as e,X as W,L as k,G as A}from"./index-DO3DQyOj.js";import{B as o}from"./Combination-CmbmT9KT.js";import{T as Y}from"./ThemeToggle-D7luiHAO.js";import{A as q,a as K,L as Q}from"./avatar-CQ65EOS-.js";import{t as v}from"./api-D9lEpycP.js";import{M as Z,L as V,C as ee,S as se}from"./settings-C2rD9Q76.js";import{C as te}from"./chevron-left-Wbh9FitJ.js";import{U as ae}from"./users-u0NU3Vz3.js";import{C as b}from"./clipboard-list-Iz0egXu6.js";import{B as re}from"./book-open-CV2NRBkO.js";import{U as ne}from"./user-CsuowrF_.js";import{I as L}from"./input-B8EiBX5x.js";import{C as I,a as $,b as D,d as E,c as M}from"./card-C9br3U49.js";import{B as C}from"./badge-ikHMzMmi.js";import{T as O}from"./trash-2-CYBM7sb9.js";import{C as le}from"./circle-plus-D-AU5jgv.js";import{C as F}from"./circle-check-ClT28XHX.js";import{C as de}from"./circle-alert-Dg7xvraw.js";import"./index-B0Ri7ZjS.js";import"./auth-yvpDPXXe.js";function ce({children:y}){var g;const[a,h]=d.useState(!0),u=J(),c=z(),r=v.getStoredTeacher(),p=()=>{v.logout(),c("/teacher/login")},j=[{name:"Dashboard",path:"/teacher/dashboard",icon:Q,description:"Overview & analytics"},{name:"Manage Students",path:"/teacher/students",icon:ae,description:"Student enrollment"},{name:"Online Exams",path:"/teacher/exams",icon:b,description:"Create & manage exams"},{name:"Results & Analytics",path:"/teacher/analytics",icon:ee,description:"Student performance"},{name:"Assessment Tools",path:"/teacher/assessments",icon:re,description:"Holiday assessments"},{name:"Profile",path:"/teacher/profile",icon:ne,description:"Manage your profile"},{name:"Settings",path:"/teacher/settings",icon:se,description:"Account settings"}],f=n=>n==="/teacher/dashboard"?u.pathname===n:u.pathname.startsWith(n);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-card border-b border-border z-50 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>h(!a),className:"lg:hidden",children:a?e.jsx(W,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs(k,{to:"/",className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-school-primary dark:text-school-accent",children:"CSAMZ Teacher Portal"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:(r==null?void 0:r.full_name)||"Teacher"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(r==null?void 0:r.trade)||"Teacher"," â€¢ ID: ",(r==null?void 0:r.id)||"N/A"]})]}),e.jsx(q,{className:"h-8 w-8 border-2 border-school-primary",children:e.jsx(K,{className:"bg-school-primary/10 text-school-primary text-xs font-semibold",children:((g=r==null?void 0:r.full_name)==null?void 0:g.charAt(0))||"T"})})]}),e.jsx(Y,{}),e.jsxs(o,{variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),e.jsxs("aside",{className:`fixed top-16 left-0 bottom-0 w-64 bg-card border-r border-border transition-transform duration-300 z-40 ${a?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[e.jsx("nav",{className:"p-4 space-y-2",children:j.map(n=>{const S=n.icon,i=f(n.path);return e.jsxs(k,{to:n.path,className:`flex items-start gap-3 p-3 rounded-lg transition-all duration-200 ${i?"bg-school-primary text-white dark:bg-school-accent":"hover:bg-muted"}`,children:[e.jsx(S,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i?"text-white":""}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${i?"text-white":""}`,children:n.name}),e.jsx("div",{className:`text-xs mt-0.5 ${i?"text-white/80":"text-muted-foreground"}`,children:n.description})]})]},n.path)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-border",children:e.jsxs("div",{className:"bg-muted rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-school-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Quick Stats"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-2 bg-background rounded",children:[e.jsx("div",{className:"font-medium",children:"24"}),e.jsx("div",{className:"text-muted-foreground",children:"Students"})]}),e.jsxs("div",{className:"text-center p-2 bg-background rounded",children:[e.jsx("div",{className:"font-medium",children:"8"}),e.jsx("div",{className:"text-muted-foreground",children:"Exams"})]})]})]})})]}),e.jsx("main",{className:`pt-16 transition-all duration-300 ${a?"lg:pl-64":""}`,children:e.jsx("div",{className:"min-h-[calc(100vh-4rem)]",children:y})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>h(!1)})]})}const B="holiday-assessment-students",ie=["Level 3","Level 4","Level 5"],oe=["Mathematics","Computer Systems","Plumbing Technology","Software Development","Building Construction","Wood Technology"];function $e(){const y=z(),a=d.useMemo(()=>v.getStoredTeacher(),[]),[h,u]=d.useState(""),[c,r]=d.useState([]),[p,j]=d.useState(1),[f,g]=d.useState(null),[n,S]=d.useState({indexNumber:"",level:"",subject:""}),[i,N]=d.useState(null);d.useEffect(()=>{const s=localStorage.getItem(B);if(s)try{const t=JSON.parse(s);r(t.students||[]),j(t.nextIndex||t.students.length+1)}catch(t){console.error("Failed to parse stored students",t)}},[]),d.useEffect(()=>{const s={students:c,nextIndex:p};localStorage.setItem(B,JSON.stringify(s))},[c,p]);const P=s=>{const t="IDX",l=new Date().getFullYear().toString().slice(-2);return`${t}-${l}-${s.toString().padStart(4,"0")}`},R=s=>{s.preventDefault();const t=h.trim();if(!t){g("Please enter a student name before adding.");return}const l=P(p),m={id:Date.now(),name:t,indexNumber:l,createdAt:new Date().toISOString()};r(x=>[m,...x]),j(x=>x+1),u(""),g(`${t} assigned index ${l}.`)},U=s=>{r(t=>t.filter(l=>l.id!==s))},w=s=>{const{name:t,value:l}=s.target;S(m=>({...m,[t]:l})),N(null)},_=s=>{s.preventDefault();const{indexNumber:t,level:l,subject:m}=n,x=t.trim().toUpperCase();if(!x||!l||!m){N({type:"error",message:"Please provide index number, level, and subject."});return}const T=c.find(H=>H.indexNumber.toUpperCase()===x);if(!T){N({type:"error",message:"Index number not found. Ask your teacher for assistance."});return}N({type:"success",message:`${T.name}, you are ready to start your ${m} assessment at ${l}.`})},G=d.useMemo(()=>c.length,[c]),X=()=>{v.logout(),y("/teacher/login")};return e.jsx(ce,{children:e.jsx("section",{className:"min-h-screen bg-muted/30 py-16 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl space-y-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(A,{className:"w-16 h-16 mx-auto text-school-primary dark:text-school-accent"}),e.jsx("h1",{className:"text-4xl font-bold",children:e.jsx("span",{className:"gradient-text",children:"Teacher Dashboard"})}),(a==null?void 0:a.trade)&&e.jsx(C,{variant:"secondary",className:"uppercase tracking-wide",children:a.trade}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Enroll students for holiday assessments, generate index numbers, and help learners launch the right assessment based on their level and subject."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[e.jsx(o,{asChild:!0,className:"flex items-center gap-2",children:e.jsxs(k,{to:"/teacher/exams",children:[e.jsx(b,{className:"w-4 h-4"}),"Manage online exams"]})}),e.jsxs(o,{variant:"outline",onClick:X,className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 rotate-45"}),"Logout"]})]})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsxs(I,{className:"shadow-lg",children:[e.jsxs($,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-school-primary"}),"Student Enrollment"]}),e.jsx(E,{children:"Add student names to generate unique index numbers automatically."})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:R,className:"grid gap-4 md:grid-cols-[1fr_auto]",children:[e.jsx(L,{value:h,onChange:s=>u(s.target.value),placeholder:"Enter student full name","aria-label":"Student name"}),e.jsxs(o,{type:"submit",className:"whitespace-nowrap flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Add student"]})]}),f&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-border bg-muted/50 p-4 text-sm",children:[e.jsx(F,{className:"mt-0.5 h-4 w-4 text-emerald-500"}),e.jsx("p",{children:f})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total enrolled students"}),e.jsx(C,{variant:"secondary",className:"text-base",children:G})]}),e.jsx("div",{className:"max-h-80 overflow-auto rounded-lg border border-dashed",children:c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-16 text-center text-muted-foreground",children:[e.jsx(b,{className:"w-10 h-10"}),e.jsx("p",{children:"No students enrolled yet. Add names to build your assessment roster."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-border text-sm",children:[e.jsx("thead",{className:"bg-muted/60",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Student Name"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Index Number"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Enrolled"}),e.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border bg-background/80",children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 font-medium",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(C,{variant:"outline",className:"font-mono",children:s.indexNumber})}),e.jsx("td",{className:"px-4 py-2 text-muted-foreground",children:new Date(s.createdAt).toLocaleString()}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>U(s.id),"aria-label":`Remove ${s.name}`,children:e.jsx(O,{className:"w-4 h-4"})})})]},s.id))})]})})]})]}),e.jsxs(I,{className:"shadow-lg",children:[e.jsxs($,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-school-primary"}),"Student Assessment Launch"]}),e.jsx(E,{children:"Enter the generated index number, choose the level and subject, then launch the assessment."})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("form",{className:"space-y-4",onSubmit:_,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"indexNumber",className:"text-sm font-medium text-muted-foreground",children:"Index number"}),e.jsx(L,{id:"indexNumber",name:"indexNumber",value:n.indexNumber,onChange:w,placeholder:"e.g. IDX-25-0001",className:"uppercase"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"level",className:"text-sm font-medium text-muted-foreground",children:"Study level"}),e.jsxs("select",{id:"level",name:"level",value:n.level,onChange:w,className:"w-full rounded-md border border-border bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-school-primary",children:[e.jsx("option",{value:"",children:"Select level"}),ie.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"subject",className:"text-sm font-medium text-muted-foreground",children:"Subject"}),e.jsxs("select",{id:"subject",name:"subject",value:(a==null?void 0:a.trade)||n.subject,onChange:w,className:"w-full rounded-md border border-border bg-background px-3 py-2 focus:outline-none focus:ring-2 focus:ring-school-primary",disabled:!!(a!=null&&a.trade),children:[e.jsx("option",{value:"",children:"Select subject"}),oe.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx(o,{type:"submit",className:"w-full",size:"lg",children:"Launch assessment"})]}),i&&e.jsxs("div",{className:`flex items-start gap-3 rounded-lg border p-4 text-sm ${i.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-400/40 dark:bg-emerald-400/10":"border-destructive/20 bg-destructive/10 text-destructive"}`,children:[i.type==="success"?e.jsx(F,{className:"mt-0.5 h-4 w-4"}):e.jsx(de,{className:"mt-0.5 h-4 w-4"}),e.jsx("p",{children:i.message})]})]})]})]})]})})})}export{$e as default};
