import{b as f,d as p,r as l,j as e,L as g}from"./index-CsgYaV5H.js";import{T as b}from"./TeacherLayout-BHtakkNT.js";import{C as N,a as y,b as w,d as T,c as k}from"./card-CIYtGjiO.js";import{B as v}from"./ThemeToggle-Bwx1KZ0R.js";import{B as C}from"./badge-CpS_Z_D6.js";import{T as E,a as L,b as o,c as t,d as R,e as a}from"./table-BQjjS5wR.js";import{i as S}from"./api-BCzVkedE.js";import{A as B}from"./arrow-left-aUl2PMcJ.js";import{L as A}from"./loader-circle-B_j-QHxK.js";import"./avatar-CGuztETI.js";import"./index-DH-MU9K0.js";import"./settings-rizTttmP.js";import"./chevron-left-DXSgmS0_.js";import"./users-Drmh8jIn.js";import"./book-open-wK7-fWSF.js";import"./user-B0r-EK1A.js";import"./auth-yvpDPXXe.js";function W(){const{examId:d}=f(),{toast:n}=p(),[c,m]=l.useState(!0),[i,x]=l.useState([]),[h,u]=l.useState("");l.useEffect(()=>{(async()=>{if(d)try{const r=await S.getExamResults(Number(d));r.success&&(x(r.results),u(r.exam_title))}catch(r){n({title:"Error",description:r.message||"Failed to load results",variant:"destructive"})}finally{m(!1)}})()},[d,n]);const j=s=>{switch(s){case"A":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400";case"B":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"C":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";default:return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}};return e.jsx(b,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(g,{to:"/teacher/exams",children:e.jsx(B,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Exam Results"}),e.jsx("p",{className:"text-muted-foreground",children:c?"Loading...":`Viewing results for "${h}"`})]})]}),e.jsxs(N,{className:"shadow-md",children:[e.jsx(y,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsx(w,{children:"Student submissions"}),e.jsxs(T,{children:[i.length," result",i.length!==1?"s":""," found"]})]})}),e.jsx(k,{children:c?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(A,{className:"w-8 h-8 animate-spin text-school-primary"})}):i.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e.jsx("p",{children:"No students have taken this exam yet."})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(o,{children:[e.jsx(t,{children:"Student Name"}),e.jsx(t,{children:"Username"}),e.jsx(t,{children:"Submitted At"}),e.jsx(t,{className:"text-right",children:"Score"}),e.jsx(t,{className:"text-right",children:"Percentage"}),e.jsx(t,{className:"text-center",children:"Grade"})]})}),e.jsx(R,{children:i.map(s=>e.jsxs(o,{children:[e.jsx(a,{className:"font-medium",children:s.full_name}),e.jsx(a,{className:"text-muted-foreground",children:s.username}),e.jsx(a,{children:new Date(s.submitted_at).toLocaleString()}),e.jsxs(a,{className:"text-right font-mono",children:[s.score," / ",s.total_marks]}),e.jsxs(a,{className:"text-right font-mono",children:[s.percentage,"%"]}),e.jsx(a,{className:"text-center",children:e.jsx(C,{variant:"secondary",className:j(s.grade),children:s.grade})})]},s.id))})]})})})]})]})})}export{W as default};
